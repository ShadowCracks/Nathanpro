import{u as m,a as x,r as t,b as h,j as e}from"./index-C_XptwtU.js";const g=()=>{const r=m(),{checkAuth:o}=x(),[c,l]=t.useState(!0),[d,s]=t.useState("processing");t.useEffect(()=>{u()},[]);const u=async()=>{try{const a=new URLSearchParams(window.location.search).get("session_id");if(!a){s("failed");return}const i=await h.get(`https://nathanpro.onrender.com/api/stripe/verify/${a}`);i.data.success&&i.data.paid?(s("success"),await o()):s("failed")}catch(n){console.error("Payment verification error:",n),s("failed")}finally{l(!1)}};return c?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verifying your payment..."})]})}):d==="failed"?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payment Failed"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't verify your payment. Please contact support if you believe this is an error."}),e.jsx("button",{onClick:()=>r("/course"),className:"inline-block px-6 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition",children:"Back to Course"})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your purchase. You now have full access to the course."}),e.jsx("button",{onClick:()=>r("/course"),className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",children:"Go to Course"})]})})};export{g as default};
